{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getToken } from '@/utils/auth';\nexport default {\n  name: \"BannerView\",\n  data() {\n    return {\n      token: {\n        Authorization: getToken()\n      },\n      fileList: [],\n      srcList: []\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.axios.get(\"/banner/all\").then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.fileList = result.data;\n          this.fileList.forEach(item => {\n            this.srcList.push(item.url);\n          });\n        } else {\n          this.$message.error(result.msg);\n        }\n      });\n    },\n    handleUploadSuccess() {\n      this.load();\n    },\n    handleRemove(file, fileList) {},\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleExceed(files, fileList) {\n      this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n    },\n    beforeRemove(file, fileList) {\n      this.$confirm(`确定移除 ${file.name}？`).then(() => {\n        let id = file.id;\n        this.fileList = fileList.filter(item => item.id == id);\n        this.axios.post(\"/banner/delete\", {\n          params: {\n            id: id\n          }\n        }).then(res => {\n          let result = res.data;\n          if (result.code === 'C200') {\n            this.$message.success(result.msg);\n          } else {\n            this.$message.error(result.msg);\n          }\n        });\n      }).catch(() => {\n        this.load();\n      });\n    }\n  }\n};","map":{"version":3,"names":["getToken","name","data","token","Authorization","fileList","srcList","created","load","methods","axios","get","then","res","result","code","forEach","item","push","url","$message","error","msg","handleUploadSuccess","handleRemove","file","handlePreview","console","log","handleExceed","files","warning","length","beforeRemove","$confirm","id","filter","post","params","success","catch"],"sources":["src/views/shopview/BannerView.vue"],"sourcesContent":["<template>\n  <div>\n    <el-row type=\"flex\">\n      <el-col>\n        <el-carousel indicator-position=\"outside\" height=\"60vh\">\n          <el-carousel-item v-for=\"item in fileList\" :key=\"item.id\">\n            <el-image \n              style=\"width: 100%; height: 60vh\"\n              :src=\"item.url\"\n              fit=\"fill\"\n              :preview-src-list=\"srcList\">\n            </el-image>\n          </el-carousel-item>\n        </el-carousel>\n      </el-col>\n    </el-row>\n    <el-row type=\"flex\">\n      <el-col>\n        <el-upload\n          class=\"upload-demo\"\n          action=\"http://localhost:9090/letterbox-api/banner/add\"\n          :headers=\"token\"\n          :on-preview=\"handlePreview\"\n          :on-remove=\"handleRemove\"\n          :before-remove=\"beforeRemove\"\n          multiple\n          :limit=\"3\"\n          :on-success=\"handleUploadSuccess\"\n          :on-exceed=\"handleExceed\"\n          :file-list=\"fileList\">\n          <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n          <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\n        </el-upload>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { getToken } from '@/utils/auth';\n\nexport default {\n  name: \"BannerView\",\n  data() {\n    return {\n      token: {\n        Authorization: getToken()\n      },\n      fileList: [],\n      srcList: []\n    }\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.axios.get(\"/banner/all\").then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.fileList = result.data;\n          this.fileList.forEach(item => {\n            this.srcList.push(item.url);\n          })\n        } else {\n          this.$message.error(result.msg);\n        }\n      })\n    },\n    handleUploadSuccess() {\n      this.load();\n    },\n    handleRemove(file, fileList) {\n      \n    },\n    handlePreview(file) {\n      console.log(file);\n    },\n    handleExceed(files, fileList) {\n      this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n    },\n    beforeRemove(file, fileList) {\n      this.$confirm(`确定移除 ${ file.name }？`).then(()=> {\n        let id = file.id;\n      this.fileList = fileList.filter(item => item.id == id);\n      this.axios.post(\"/banner/delete\", {\n        params: {\n          id: id\n        }\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.$message.success(result.msg);\n        } else {\n          this.$message.error(result.msg);\n        }\n      })\n      }).catch(()=>{\n        this.load();\n      })\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n"],"mappings":";AAuCA,SAAAA,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,KAAA;QACAC,aAAA,EAAAJ,QAAA;MACA;MACAK,QAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAA;MACA,KAAAE,KAAA,CAAAC,GAAA,gBAAAC,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAX,IAAA;QACA,IAAAY,MAAA,CAAAC,IAAA;UACA,KAAAV,QAAA,GAAAS,MAAA,CAAAZ,IAAA;UACA,KAAAG,QAAA,CAAAW,OAAA,CAAAC,IAAA;YACA,KAAAX,OAAA,CAAAY,IAAA,CAAAD,IAAA,CAAAE,GAAA;UACA;QACA;UACA,KAAAC,QAAA,CAAAC,KAAA,CAAAP,MAAA,CAAAQ,GAAA;QACA;MACA;IACA;IACAC,oBAAA;MACA,KAAAf,IAAA;IACA;IACAgB,aAAAC,IAAA,EAAApB,QAAA,GAEA;IACAqB,cAAAD,IAAA;MACAE,OAAA,CAAAC,GAAA,CAAAH,IAAA;IACA;IACAI,aAAAC,KAAA,EAAAzB,QAAA;MACA,KAAAe,QAAA,CAAAW,OAAA,uBAAAD,KAAA,CAAAE,MAAA,aAAAF,KAAA,CAAAE,MAAA,GAAA3B,QAAA,CAAA2B,MAAA;IACA;IACAC,aAAAR,IAAA,EAAApB,QAAA;MACA,KAAA6B,QAAA,SAAAT,IAAA,CAAAxB,IAAA,KAAAW,IAAA;QACA,IAAAuB,EAAA,GAAAV,IAAA,CAAAU,EAAA;QACA,KAAA9B,QAAA,GAAAA,QAAA,CAAA+B,MAAA,CAAAnB,IAAA,IAAAA,IAAA,CAAAkB,EAAA,IAAAA,EAAA;QACA,KAAAzB,KAAA,CAAA2B,IAAA;UACAC,MAAA;YACAH,EAAA,EAAAA;UACA;QACA,GAAAvB,IAAA,CAAAC,GAAA;UACA,IAAAC,MAAA,GAAAD,GAAA,CAAAX,IAAA;UACA,IAAAY,MAAA,CAAAC,IAAA;YACA,KAAAK,QAAA,CAAAmB,OAAA,CAAAzB,MAAA,CAAAQ,GAAA;UACA;YACA,KAAAF,QAAA,CAAAC,KAAA,CAAAP,MAAA,CAAAQ,GAAA;UACA;QACA;MACA,GAAAkB,KAAA;QACA,KAAAhC,IAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}