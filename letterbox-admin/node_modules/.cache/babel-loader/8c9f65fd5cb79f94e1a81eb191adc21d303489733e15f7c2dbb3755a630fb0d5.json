{"ast":null,"code":"export default {\n  name: \"WritingView\",\n  data() {\n    return {\n      active: 0,\n      rules: {\n        context: [{\n          required: true,\n          message: '请输入信件内容',\n          trigger: 'blur'\n        }, {\n          min: 10,\n          max: 10,\n          message: '长度在 4 到 10 个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 4,\n          max: 100,\n          message: '长度在 4 到 100 个字符',\n          trigger: 'blur'\n        }]\n      },\n      form: {\n        username: '',\n        callPhone: '',\n        fromAddress: '',\n        status: 2\n      },\n      paperData: [],\n      coverData: [],\n      zhinkData: [],\n      eninkData: [],\n      language: '1'\n    };\n  },\n  created() {\n    this.getUser();\n    this.load();\n  },\n  methods: {\n    getUser() {\n      this.axios.get(\"/user/local\").then(res => {\n        let result = res.data;\n        if (result.code == 'C200') {\n          this.form.username = result.data.username;\n          this.form.callPhone = result.data.phone;\n          this.form.fromAddress = result.data.address;\n        } else {\n          this.$message.error(\"请稍后重试\");\n        }\n      });\n    },\n    load() {\n      this.axios.get(\"/good/all\", {\n        params: {\n          paper: 'paper',\n          cover: 'cover'\n        }\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.paperData = result.data.paper;\n          this.coverData = result.data.cover;\n          this.zhinkData = result.data.zhink;\n          this.eninkData = result.data.enink;\n        } else {\n          this.$message.error(result.msg);\n        }\n      });\n    },\n    last() {\n      if (this.active-- == 0) this.active = 0;\n    },\n    next() {\n      if (this.active++ > 2) this.active = 0;\n    },\n    upload() {\n      this.axios.post(\"/letter/upload\", this.form).then(res => {\n        let result = res.data;\n        if (result.code == 'C200') {\n          this.$message.success(\"上传成功\");\n          this.form = {};\n          this.next();\n        } else {\n          this.$message.error(result.msg);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","active","rules","context","required","message","trigger","min","max","password","form","username","callPhone","fromAddress","status","paperData","coverData","zhinkData","eninkData","language","created","getUser","load","methods","axios","get","then","res","result","code","phone","address","$message","error","params","paper","cover","zhink","enink","msg","last","next","upload","post","success"],"sources":["src/views/shopview/WritingView.vue"],"sourcesContent":["<template>\n    <div>\n        <el-row type=\"flex\">\n            <el-col>\n                <el-steps :active=\"active\" finish-status=\"success\" align-center>\n                <el-step title=\"写信\" icon=\"el-icon-edit\"></el-step>\n                <el-step title=\"信息\" icon=\"el-icon-info\"></el-step>\n                <el-step title=\"类型\" icon=\"el-icon-picture\"></el-step>\n                <el-step title=\"上传\" icon=\"el-icon-upload\"></el-step>\n                </el-steps>\n            </el-col>\n        </el-row>\n        <el-row type=\"flex\">\n            <el-col>\n                <el-form :ref=\"'form'\" :model=\"form\" :rules=\"rules\">\n                    <div v-if=\"active===0\">\n                        <el-form-item>\n                            <el-input style=\"font-size: large;\" type=\"textarea\" rows=\"20\" placeholder=\"请输入内容\" v-model=\"form.context\" maxlength=\"500\" show-word-limit></el-input>\n                        </el-form-item>\n                    </div>\n                    <div v-else-if=\"active===1\">\n                        <el-form-item label=\"收件方\">\n                            <el-input v-model=\"form.receiver\" style=\"margin: 20px 20px 20px auto;\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"收件电话\">\n                            <el-input v-model=\"form.receiverPhone\" style=\"margin: 20px 20px 20px auto;\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"目的地址\">\n                            <el-input v-model=\"form.toAddress\" style=\"margin: 20px 20px 20px auto;\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"邮编\">\n                            <el-input v-model=\"form.postalCode\" style=\"margin: 20px 20px 20px auto;\"></el-input>\n                        </el-form-item>\n                    </div>\n                    <div v-else-if=\"active===2\">\n                        <el-form-item label=\"信纸类型\">\n                            <el-select v-model=\"form.paperId\" placeholder=\"请选择信纸类型\">\n                                <el-option v-for=\"item in paperData\" :key=\"item.id\" :label=\"item.detail\" :value=\"item.id\"></el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item label=\"信封类型\">\n                            <el-select v-model=\"form.coverId\" placeholder=\"请选择信封类型\">\n                                <el-option v-for=\"item in coverData\" :key=\"item.id\" :label=\"item.detail\" :value=\"item.id\"></el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item label=\"语言\">\n                            <el-radio-group v-model=\"language\">\n                                <el-radio label=\"1\">中文</el-radio>\n                                <el-radio label=\"2\">英文</el-radio>\n                            </el-radio-group>\n                        </el-form-item>\n                        <div v-if=\"language === '1'\">\n                            <el-form-item label=\"字体\">\n                                <el-select v-model=\"form.inkId\" placeholder=\"请选择字体样式\">\n                                    <el-option  v-for=\"item in zhinkData\" :key=\"item.id\" :label=\"item.goodName\" :value=\"item.id\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                        <div v-else>\n                            <el-form-item label=\"字体\">\n                                <el-select v-model=\"form.inkId\" placeholder=\"请选择字体样式\">\n                                    <el-option  v-for=\"item in eninkData\" :key=\"item.id\" :label=\"item.goodName\" :value=\"item.id\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                    </div>\n                    <div v-else-if=\"active === 3\">\n                        <el-card class=\"box-card\">\n                            <el-descriptions title=\"信件\" class=\"margin-top\" :column=\"3\" size=\"mini\" border>\n                            <el-descriptions-item label=\"用户名\">{{ form.username }}</el-descriptions-item>\n                            <el-descriptions-item label=\"联系方式\">{{ form.callPhone }}</el-descriptions-item>\n                            <el-descriptions-item label=\"收件方\">{{ form.receiver }}</el-descriptions-item>\n                            <el-descriptions-item label=\"收件电话\">{{ form.receiverPhone }}</el-descriptions-item>\n                            <el-descriptions-item label=\"源地址\">{{ form.fromAddress }}</el-descriptions-item>\n                            <el-descriptions-item label=\"目的地址\">{{ form.toAddress }}</el-descriptions-item>\n                            <el-descriptions-item label=\"邮编\">{{ form.postalCode }}</el-descriptions-item>\n                            </el-descriptions>\n                            <el-divider>内容</el-divider>\n                            <div v-if=\"form.inkId===13\">\n                                <span class=\"zh_CN_1\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===14\">\n                                <span class=\"zh_CN_2\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===15\">\n                                <span class=\"zh_CN_3\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===16\">\n                                <span class=\"en_US_4\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===17\">\n                                <span class=\"en_US_5\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===18\">\n                                <span class=\"en_US_6\">{{ form.context }}</span>\n                            </div>\n                            <div v-else>\n                                <span>{{ form.context }}</span>\n                            </div>\n                        </el-card>\n                    </div>\n                </el-form>\n                <div>\n                    <div v-if=\"active === 3\">\n                        <el-popconfirm title=\"确定重置吗？\" @confirm=\"next\">\n                            <el-button slot=\"reference\" style=\"margin-top: 12px; margin-right: 12px;\">重置</el-button>\n                        </el-popconfirm>\n                        <el-button style=\"margin-top: 12px;\" @click=\"upload\">完成</el-button>\n                    </div>\n                    <div v-else-if=\"active === 0\">\n                        <el-button style=\"margin-top: 12px;\" @click=\"next\">下一步</el-button>\n                    </div>\n                    <div v-else>\n                        <el-button style=\"margin-top: 12px;\" @click=\"last\">上一步</el-button>\n                        <el-button style=\"margin-top: 12px;\" @click=\"next\">下一步</el-button>\n                    </div>\n                </div>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"WritingView\",\n    data() {\n        return {\n            active: 0,\n            rules: {\n                context: [\n                    { required: true, message: '请输入信件内容', trigger: 'blur' },\n                    { min: 10, max: 10, message: '长度在 4 到 10 个字符', trigger: 'blur' }\n                ],\n                password: [\n                    { required: true, message: '请输入密码', trigger: 'blur' },\n                    { min: 4, max: 100, message: '长度在 4 到 100 个字符', trigger: 'blur' }\n                ],\n            },\n            form: {\n                username: '',\n                callPhone: '',\n                fromAddress: '',\n                status: 2\n            },\n            paperData: [],\n            coverData: [],\n            zhinkData: [],\n            eninkData: [],\n            language: '1',\n        }\n    },\n    created() {\n        this.getUser();\n        this.load();\n    },\n    methods: {\n        getUser() {\n            this.axios.get(\"/user/local\").then(res => {\n                let result = res.data;\n                if (result.code == 'C200') {\n                    this.form.username = result.data.username;\n                    this.form.callPhone = result.data.phone;\n                    this.form.fromAddress = result.data.address;\n                } else {\n                    this.$message.error(\"请稍后重试\");\n                }\n            });\n        },\n        load() {\n            this.axios.get(\"/good/all\", {\n                params: {\n                    paper: 'paper',\n                    cover: 'cover'\n                }\n            }).then(res => {\n                let result = res.data;\n                if (result.code === 'C200') {\n                    this.paperData = result.data.paper;\n                    this.coverData = result.data.cover;\n                    this.zhinkData = result.data.zhink;\n                    this.eninkData = result.data.enink;\n                } else {\n                    this.$message.error(result.msg);\n                }\n            });\n        },\n        last() {\n            if (this.active-- == 0) this.active = 0;\n        },\n        next() {\n            if (this.active++ > 2) this.active = 0;\n        },\n        upload() {\n            this.axios.post(\"/letter/upload\", this.form).then(res => {\n                let result = res.data;\n                if (result.code == 'C200') {\n                    this.$message.success(\"上传成功\");\n                    this.form = {};\n                    this.next();\n                } else {\n                    this.$message.error(result.msg);\n                }\n            })\n        }\n    }\n}\n</script>\n\n<style>\n@import \"../../assets/font/font.css\";\n\n.zh_CN_1 {\n  font-family: coki;\n  font-size: 25px;\n}\n.zh_CN_2 {\n  font-family: WCF;\n  font-size: 25px;\n}\n\n.zh_CN_3 {\n  font-family: WF;\n  font-size: 25px;\n}\n\n.en_US_4 {\n  font-family: willion;\n  font-size: 25px;\n}\n\n.en_US_5 {\n  font-family: family;\n  font-size: 25px;\n}\n\n.en_US_6 {\n  font-family: romeobohemian;\n  font-size: 25px;\n}\n</style>"],"mappings":"AA2HA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;MACAC,KAAA;QACAC,OAAA,GACA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,EACA;QACAG,QAAA,GACA;UAAAL,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAI,IAAA;QACAC,QAAA;QACAC,SAAA;QACAC,WAAA;QACAC,MAAA;MACA;MACAC,SAAA;MACAC,SAAA;MACAC,SAAA;MACAC,SAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAF,QAAA;MACA,KAAAG,KAAA,CAAAC,GAAA,gBAAAC,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAA3B,IAAA;QACA,IAAA4B,MAAA,CAAAC,IAAA;UACA,KAAAnB,IAAA,CAAAC,QAAA,GAAAiB,MAAA,CAAA5B,IAAA,CAAAW,QAAA;UACA,KAAAD,IAAA,CAAAE,SAAA,GAAAgB,MAAA,CAAA5B,IAAA,CAAA8B,KAAA;UACA,KAAApB,IAAA,CAAAG,WAAA,GAAAe,MAAA,CAAA5B,IAAA,CAAA+B,OAAA;QACA;UACA,KAAAC,QAAA,CAAAC,KAAA;QACA;MACA;IACA;IACAX,KAAA;MACA,KAAAE,KAAA,CAAAC,GAAA;QACAS,MAAA;UACAC,KAAA;UACAC,KAAA;QACA;MACA,GAAAV,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAA3B,IAAA;QACA,IAAA4B,MAAA,CAAAC,IAAA;UACA,KAAAd,SAAA,GAAAa,MAAA,CAAA5B,IAAA,CAAAmC,KAAA;UACA,KAAAnB,SAAA,GAAAY,MAAA,CAAA5B,IAAA,CAAAoC,KAAA;UACA,KAAAnB,SAAA,GAAAW,MAAA,CAAA5B,IAAA,CAAAqC,KAAA;UACA,KAAAnB,SAAA,GAAAU,MAAA,CAAA5B,IAAA,CAAAsC,KAAA;QACA;UACA,KAAAN,QAAA,CAAAC,KAAA,CAAAL,MAAA,CAAAW,GAAA;QACA;MACA;IACA;IACAC,KAAA;MACA,SAAAvC,MAAA,cAAAA,MAAA;IACA;IACAwC,KAAA;MACA,SAAAxC,MAAA,aAAAA,MAAA;IACA;IACAyC,OAAA;MACA,KAAAlB,KAAA,CAAAmB,IAAA,wBAAAjC,IAAA,EAAAgB,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAA3B,IAAA;QACA,IAAA4B,MAAA,CAAAC,IAAA;UACA,KAAAG,QAAA,CAAAY,OAAA;UACA,KAAAlC,IAAA;UACA,KAAA+B,IAAA;QACA;UACA,KAAAT,QAAA,CAAAC,KAAA,CAAAL,MAAA,CAAAW,GAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}