{"ast":null,"code":"\"use strict\";\n\nimport Vue from 'vue';\nimport axios from \"axios\";\nimport { getToken } from '@/utils/auth';\nconst TokenKey = \"Authorization\";\n\n// Full config:  https://github.com/axios/axios#request-config\n// axios.defaults.baseURL = process.env.baseURL || process.env.apiUrl || '';\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\n// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n\nlet config = {\n  // baseURL: process.env.baseURL || process.env.apiUrl || \"\"\n  // timeout: 60 * 1000, // Timeout\n  // withCredentials: true, // Check cross-site Access-Control\n  baseURL: \"http://localhost:9090\",\n  timeout: 60 * 1000,\n  withCredentials: false\n};\nconst _axios = axios.create(config);\n_axios.interceptors.request.use(\n//这里统一添加token头部\nfunction (config) {\n  // Do something before request is sent\n  if (getToken()) {\n    config.headers.Authorization = getToken();\n  }\n  return config;\n}, function (error) {\n  // Do something with request error\n  return Promise.reject(error);\n});\n\n// Add a response interceptor\n_axios.interceptors.response.use(function (response) {\n  // Do something with response data\n  return response;\n}, function (error) {\n  // Do something with response error\n  return Promise.reject(error);\n});\nPlugin.install = function (Vue, options) {\n  Vue.axios = _axios;\n  window.axios = _axios;\n  Object.defineProperties(Vue.prototype, {\n    axios: {\n      get() {\n        return _axios;\n      }\n    },\n    $axios: {\n      get() {\n        return _axios;\n      }\n    }\n  });\n};\nVue.use(Plugin);\nexport default Plugin;","map":{"version":3,"names":["Vue","axios","getToken","TokenKey","config","baseURL","timeout","withCredentials","_axios","create","interceptors","request","use","headers","Authorization","error","Promise","reject","response","Plugin","install","options","window","Object","defineProperties","prototype","get","$axios"],"sources":["/Users/jason/Downloads/project/LetterBox/letterbox-admin/src/plugins/axios.js"],"sourcesContent":["\"use strict\";\n\nimport Vue from 'vue';\nimport axios from \"axios\";\nimport { getToken } from '@/utils/auth';\n\nconst TokenKey = \"Authorization\";\n\n// Full config:  https://github.com/axios/axios#request-config\n// axios.defaults.baseURL = process.env.baseURL || process.env.apiUrl || '';\n// axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;\n// axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n\nlet config = {\n  // baseURL: process.env.baseURL || process.env.apiUrl || \"\"\n  // timeout: 60 * 1000, // Timeout\n  // withCredentials: true, // Check cross-site Access-Control\n  baseURL: \"http://localhost:9090\",\n  timeout: 60 * 1000,\n  withCredentials: false\n};\n\nconst _axios = axios.create(config);\n\n_axios.interceptors.request.use(\n  //这里统一添加token头部\n  function(config) {\n    // Do something before request is sent\n    if (getToken()) {\n      config.headers.Authorization = getToken();\n    }\n    return config;\n  },\n  function(error) {\n    // Do something with request error\n    return Promise.reject(error);\n  }\n);\n\n// Add a response interceptor\n_axios.interceptors.response.use(\n  function(response) {\n    // Do something with response data\n    return response;\n  },\n  function(error) {\n    // Do something with response error\n    return Promise.reject(error);\n  }\n);\n\nPlugin.install = function(Vue, options) {\n  Vue.axios = _axios;\n  window.axios = _axios;\n  Object.defineProperties(Vue.prototype, {\n    axios: {\n      get() {\n        return _axios;\n      }\n    },\n    $axios: {\n      get() {\n        return _axios;\n      }\n    },\n  });\n};\n\nVue.use(Plugin)\n\nexport default Plugin;\n"],"mappings":"AAAA,YAAY;;AAEZ,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,cAAc;AAEvC,MAAMC,QAAQ,GAAG,eAAe;;AAEhC;AACA;AACA;AACA;;AAEA,IAAIC,MAAM,GAAG;EACX;EACA;EACA;EACAC,OAAO,EAAE,uBAAuB;EAChCC,OAAO,EAAE,EAAE,GAAG,IAAI;EAClBC,eAAe,EAAE;AACnB,CAAC;AAED,MAAMC,MAAM,GAAGP,KAAK,CAACQ,MAAM,CAACL,MAAM,CAAC;AAEnCI,MAAM,CAACE,YAAY,CAACC,OAAO,CAACC,GAAG;AAC7B;AACA,UAASR,MAAM,EAAE;EACf;EACA,IAAIF,QAAQ,CAAC,CAAC,EAAE;IACdE,MAAM,CAACS,OAAO,CAACC,aAAa,GAAGZ,QAAQ,CAAC,CAAC;EAC3C;EACA,OAAOE,MAAM;AACf,CAAC,EACD,UAASW,KAAK,EAAE;EACd;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAP,MAAM,CAACE,YAAY,CAACQ,QAAQ,CAACN,GAAG,CAC9B,UAASM,QAAQ,EAAE;EACjB;EACA,OAAOA,QAAQ;AACjB,CAAC,EACD,UAASH,KAAK,EAAE;EACd;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAEDI,MAAM,CAACC,OAAO,GAAG,UAASpB,GAAG,EAAEqB,OAAO,EAAE;EACtCrB,GAAG,CAACC,KAAK,GAAGO,MAAM;EAClBc,MAAM,CAACrB,KAAK,GAAGO,MAAM;EACrBe,MAAM,CAACC,gBAAgB,CAACxB,GAAG,CAACyB,SAAS,EAAE;IACrCxB,KAAK,EAAE;MACLyB,GAAGA,CAAA,EAAG;QACJ,OAAOlB,MAAM;MACf;IACF,CAAC;IACDmB,MAAM,EAAE;MACND,GAAGA,CAAA,EAAG;QACJ,OAAOlB,MAAM;MACf;IACF;EACF,CAAC,CAAC;AACJ,CAAC;AAEDR,GAAG,CAACY,GAAG,CAACO,MAAM,CAAC;AAEf,eAAeA,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}