{"ast":null,"code":"export default {\n  name: \"WritingView\",\n  data() {\n    return {\n      active: 0,\n      form: {\n        username: '',\n        callPhone: '',\n        fromAddress: '',\n        status: 2\n      },\n      rules: {\n        context: [{\n          required: true,\n          message: '请输入内容',\n          trigger: 'blur'\n        }, {\n          min: 10,\n          max: 100,\n          message: '长度在 10 到 100 个字符',\n          trigger: 'blur'\n        }],\n        receiver: [{\n          required: true,\n          message: '请输入收件人信息',\n          trigger: 'blur'\n        }, {\n          min: 4,\n          max: 10,\n          message: '长度在 4 到 10 个字符',\n          trigger: 'blur'\n        }],\n        receriverPhone: [{\n          required: true,\n          message: '请输入收件电话',\n          trigger: 'blur'\n        }, {\n          min: 11,\n          max: 11,\n          message: '11位电话号码',\n          trigger: 'blur'\n        }],\n        toAddress: [{\n          required: true,\n          message: '请输入收件地址',\n          trigger: 'blur'\n        }, {\n          min: 4,\n          max: 10,\n          message: '长度在 4 到 10 个字符',\n          trigger: 'blur'\n        }],\n        postalCode: [{\n          min: 6,\n          max: 6,\n          message: '6位邮政编码',\n          trigger: 'blur'\n        }],\n        paperId: [{\n          required: true,\n          message: '请选择纸张类型',\n          trigger: 'blur'\n        }],\n        coverId: [{\n          required: true,\n          message: '请选择信封类型',\n          trigger: 'blur'\n        }],\n        inkId: [{\n          required: true,\n          message: '请选择字体样式',\n          trigger: 'blur'\n        }]\n      },\n      paperData: [],\n      coverData: [],\n      zhinkData: [],\n      eninkData: [],\n      language: '1'\n    };\n  },\n  created() {\n    this.getUser();\n    this.load();\n  },\n  methods: {\n    getUser() {\n      this.axios.get(\"/user/local\").then(res => {\n        let result = res.data;\n        if (result.code == 'C200') {\n          this.form.username = result.data.username;\n          this.form.callPhone = result.data.phone;\n          this.form.fromAddress = result.data.address;\n        } else {\n          this.$message.error(\"请稍后重试\");\n        }\n      });\n    },\n    load() {\n      this.axios.get(\"/good/all\", {\n        params: {\n          paper: 'paper',\n          cover: 'cover'\n        }\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.paperData = result.data.paper;\n          this.coverData = result.data.cover;\n          this.zhinkData = result.data.zhink;\n          this.eninkData = result.data.enink;\n        } else {\n          this.$message.error(result.msg);\n        }\n      });\n    },\n    last() {\n      if (this.active-- == 0) this.active = 0;\n    },\n    next() {\n      if (this.active++ > 2) this.active = 0;\n    },\n    upload() {\n      this.$refs['letterForm'].validate(async valid => {\n        if (valid) {\n          await this.axios.post(\"/letter/upload\", this.form).then(res => {\n            let result = res.data;\n            if (result.code == 'C200') {\n              this.$message.success(\"上传成功\");\n              this.form = {};\n              this.next();\n            } else {\n              this.$message.error(result.msg);\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","active","form","username","callPhone","fromAddress","status","rules","context","required","message","trigger","min","max","receiver","receriverPhone","toAddress","postalCode","paperId","coverId","inkId","paperData","coverData","zhinkData","eninkData","language","created","getUser","load","methods","axios","get","then","res","result","code","phone","address","$message","error","params","paper","cover","zhink","enink","msg","last","next","upload","$refs","validate","valid","post","success"],"sources":["src/views/shopview/WritingView.vue"],"sourcesContent":["<template>\n    <div>\n        <el-row type=\"flex\">\n            <el-col>\n                <el-steps :active=\"active\" finish-status=\"success\" align-center>\n                <el-step title=\"写信\" icon=\"el-icon-edit\"></el-step>\n                <el-step title=\"信息\" icon=\"el-icon-info\"></el-step>\n                <el-step title=\"类型\" icon=\"el-icon-picture\"></el-step>\n                <el-step title=\"上传\" icon=\"el-icon-upload\"></el-step>\n                </el-steps>\n            </el-col>\n        </el-row>\n        <el-row type=\"flex\">\n            <el-col>\n                <el-form :model=\"form\" :rules=\"rules\" :ref=\"'letterForm'\">\n                    <div v-if=\"active===0\">\n                        <el-form-item prop=\"context\">\n                            <el-input style=\"font-size: large;\" type=\"textarea\" rows=\"20\" placeholder=\"请输入内容\" v-model=\"form.context\" maxlength=\"500\" show-word-limit></el-input>\n                        </el-form-item>\n                    </div>\n                    <div v-else-if=\"active===1\">\n                        <el-form-item prop=\"receiver\" label=\"收件方\">\n                            <el-input v-model=\"form.receiver\" style=\"margin: 20px 20px 20px auto;\"></el-input>\n                        </el-form-item>\n                        <el-form-item prop=\"receriverPhone\" label=\"收件电话\">\n                            <el-input v-model=\"form.receiverPhone\" style=\"margin: 20px 20px 20px auto;\"></el-input>\n                        </el-form-item>\n                        <el-form-item prop=\"toAddress\" label=\"目的地址\">\n                            <el-input v-model=\"form.toAddress\" style=\"margin: 20px 20px 20px auto;\"></el-input>\n                        </el-form-item>\n                        <el-form-item prop=\"postalCode\" label=\"邮编\">\n                            <el-input v-model=\"form.postalCode\" style=\"margin: 20px 20px 20px auto;\"></el-input>\n                        </el-form-item>\n                    </div>\n                    <div v-else-if=\"active===2\">\n                        <el-form-item prop=\"paperId\" label=\"信纸类型\">\n                            <el-select v-model=\"form.paperId\" placeholder=\"请选择信纸类型\">\n                                <el-option v-for=\"item in paperData\" :key=\"item.id\" :label=\"item.detail\" :value=\"item.id\"></el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item prop=\"coverId\" label=\"信封类型\">\n                            <el-select v-model=\"form.coverId\" placeholder=\"请选择信封类型\">\n                                <el-option v-for=\"item in coverData\" :key=\"item.id\" :label=\"item.detail\" :value=\"item.id\"></el-option>\n                            </el-select>\n                        </el-form-item>\n                        <el-form-item label=\"语言\">\n                            <el-radio-group v-model=\"language\">\n                                <el-radio label=\"1\">中文</el-radio>\n                                <el-radio label=\"2\">英文</el-radio>\n                            </el-radio-group>\n                        </el-form-item>\n                        <div v-if=\"language === '1'\">\n                            <el-form-item prop=\"inkId\" label=\"字体\">\n                                <el-select v-model=\"form.inkId\" placeholder=\"请选择字体样式\">\n                                    <el-option  v-for=\"item in zhinkData\" :key=\"item.id\" :label=\"item.goodName\" :value=\"item.id\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                        <div v-else>\n                            <el-form-item prop=\"inkId\" label=\"字体\">\n                                <el-select v-model=\"form.inkId\" placeholder=\"请选择字体样式\">\n                                    <el-option  v-for=\"item in eninkData\" :key=\"item.id\" :label=\"item.goodName\" :value=\"item.id\"></el-option>\n                                </el-select>\n                            </el-form-item>\n                        </div>\n                    </div>\n                    <div v-else-if=\"active === 3\">\n                        <el-card class=\"box-card\">\n                            <el-descriptions title=\"信件\" class=\"margin-top\" :column=\"3\" size=\"mini\" border>\n                            <el-descriptions-item label=\"用户名\">{{ form.username }}</el-descriptions-item>\n                            <el-descriptions-item label=\"联系方式\">{{ form.callPhone }}</el-descriptions-item>\n                            <el-descriptions-item label=\"收件方\">{{ form.receiver }}</el-descriptions-item>\n                            <el-descriptions-item label=\"收件电话\">{{ form.receiverPhone }}</el-descriptions-item>\n                            <el-descriptions-item label=\"源地址\">{{ form.fromAddress }}</el-descriptions-item>\n                            <el-descriptions-item label=\"目的地址\">{{ form.toAddress }}</el-descriptions-item>\n                            <el-descriptions-item label=\"邮编\">{{ form.postalCode }}</el-descriptions-item>\n                            </el-descriptions>\n                            <el-divider>内容</el-divider>\n                            <div v-if=\"form.inkId===13\">\n                                <span class=\"zh_CN_1\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===14\">\n                                <span class=\"zh_CN_2\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===15\">\n                                <span class=\"zh_CN_3\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===16\">\n                                <span class=\"en_US_4\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===17\">\n                                <span class=\"en_US_5\">{{ form.context }}</span>\n                            </div>\n                            <div v-else-if=\"form.inkId===18\">\n                                <span class=\"en_US_6\">{{ form.context }}</span>\n                            </div>\n                            <div v-else>\n                                <span>{{ form.context }}</span>\n                            </div>\n                        </el-card>\n                    </div>\n                </el-form>\n                <div>\n                    <div v-if=\"active === 3\">\n                        <el-popconfirm title=\"确定重置吗？\" @confirm=\"next\">\n                            <el-button slot=\"reference\" style=\"margin-top: 12px; margin-right: 12px;\">重置</el-button>\n                        </el-popconfirm>\n                        <el-button style=\"margin-top: 12px;\" @click=\"next\">下一步</el-button>\n                        <el-button style=\"margin-top: 12px;\" @click=\"upload\">完成</el-button>\n                    </div>\n                    <div v-else-if=\"active === 0\">\n                        <el-button style=\"margin-top: 12px;\" @click=\"next\">下一步</el-button>\n                    </div>\n                    <div v-else>\n                        <el-button style=\"margin-top: 12px;\" @click=\"last\">上一步</el-button>\n                        <el-button style=\"margin-top: 12px;\" @click=\"next\">下一步</el-button>\n                    </div>\n                </div>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"WritingView\",\n    data() {\n        return {\n            active: 0,\n            form: {\n                username: '',\n                callPhone: '',\n                fromAddress: '',\n                status: 2\n            },\n            rules: {\n                context: [\n                    { required: true, message: '请输入内容', trigger: 'blur' },\n                    { min: 10, max: 100, message: '长度在 10 到 100 个字符', trigger: 'blur' }\n                ],\n                receiver: [\n                    { required: true, message: '请输入收件人信息', trigger: 'blur' },\n                    { min: 4, max: 10, message: '长度在 4 到 10 个字符', trigger: 'blur' }\n                ],\n                receriverPhone: [\n                    { required: true, message: '请输入收件电话', trigger: 'blur' },\n                    { min: 11, max: 11, message: '11位电话号码', trigger: 'blur' }\n                ],\n                toAddress: [\n                    { required: true, message: '请输入收件地址', trigger: 'blur' },\n                    { min: 4, max: 10, message: '长度在 4 到 10 个字符', trigger: 'blur' }\n                ],\n                postalCode: [\n                    { min: 6, max: 6, message: '6位邮政编码', trigger: 'blur' }\n                ],\n                paperId: [\n                    { required: true, message: '请选择纸张类型', trigger: 'blur' }\n                ],\n                coverId: [\n                    { required: true, message: '请选择信封类型', trigger: 'blur' }\n                ],\n                inkId: [\n                    { required: true, message: '请选择字体样式', trigger: 'blur' }\n                ]\n            },\n            paperData: [],\n            coverData: [],\n            zhinkData: [],\n            eninkData: [],\n            language: '1',\n        }\n    },\n    created() {\n        this.getUser();\n        this.load();\n    },\n    methods: {\n        getUser() {\n            this.axios.get(\"/user/local\").then(res => {\n                let result = res.data;\n                if (result.code == 'C200') {\n                    this.form.username = result.data.username;\n                    this.form.callPhone = result.data.phone;\n                    this.form.fromAddress = result.data.address;\n                } else {\n                    this.$message.error(\"请稍后重试\");\n                }\n            });\n        },\n        load() {\n            this.axios.get(\"/good/all\", {\n                params: {\n                    paper: 'paper',\n                    cover: 'cover'\n                }\n            }).then(res => {\n                let result = res.data;\n                if (result.code === 'C200') {\n                    this.paperData = result.data.paper;\n                    this.coverData = result.data.cover;\n                    this.zhinkData = result.data.zhink;\n                    this.eninkData = result.data.enink;\n                } else {\n                    this.$message.error(result.msg);\n                }\n            });\n        },\n        last() {\n            if (this.active-- == 0) this.active = 0;\n        },\n        next() {\n            if (this.active++ > 2) this.active = 0;\n        },\n        upload() {\n            this.$refs['letterForm'].validate(async (valid) => {\n                if (valid) {\n                    await this.axios.post(\"/letter/upload\", this.form).then(res => {\n                    let result = res.data;\n                    if (result.code == 'C200') {\n                        this.$message.success(\"上传成功\");\n                        this.form = {};\n                        this.next();\n                    } else {\n                        this.$message.error(result.msg);\n                    }\n                })\n                } else {\n                    return false;\n                }\n            });\n        }\n    }\n}\n</script>\n\n<style>\n@import \"../../assets/font/font.css\";\n\n.zh_CN_1 {\n  font-family: coki;\n  font-size: 25px;\n}\n.zh_CN_2 {\n  font-family: WCF;\n  font-size: 25px;\n}\n\n.zh_CN_3 {\n  font-family: WF;\n  font-size: 25px;\n}\n\n.en_US_4 {\n  font-family: willion;\n  font-size: 25px;\n}\n\n.en_US_5 {\n  font-family: family;\n  font-size: 25px;\n}\n\n.en_US_6 {\n  font-family: romeobohemian;\n  font-size: 25px;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}