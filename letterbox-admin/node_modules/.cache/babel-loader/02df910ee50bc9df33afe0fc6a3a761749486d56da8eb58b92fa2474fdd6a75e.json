{"ast":null,"code":"export default {\n  name: \"MenuView\",\n  data() {\n    return {\n      name: \"\",\n      description: \"\",\n      tableData: [],\n      multipleSelection: [],\n      dialogFormVisible: false,\n      form: {}\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.axios.get(\"/menu/all\").then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.tableData = result.data;\n        } else {\n          this.$message.error(result.msg);\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      });\n    },\n    search() {\n      this.axios.get(\"/menu/find\", {\n        params: {\n          name: this.name,\n          decription: this.description\n        }\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.tableData = result.data;\n        } else {\n          this.$message.error(result.msg);\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      });\n    },\n    reset() {\n      this.name = \"\";\n      this.description = \"\";\n      this.load();\n    },\n    handleAdd() {\n      this.dialogFormVisible = true;\n      this.form = {};\n    },\n    handleAddC(pid) {\n      this.dialogFormVisible = true;\n      this.form = {};\n      this.form.pid = pid;\n    },\n    save() {\n      this.axios.post(\"/menu/saveOrUpdate\", this.form).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.$message.success(\"添加成功\");\n          this.dialogFormVisible = false;\n          this.load();\n        } else {\n          this.$message.error(result.msg);\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      });\n    },\n    handleSelectionChange(val) {\n      console.log(val);\n      this.multipleSelection = val;\n    },\n    delBatch() {\n      let ids = this.multipleSelection.map(v => v.id);\n      this.axios.post(\"/menu/batchDelete\", ids).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.$message.success(\"批量删除成功\");\n          this.load();\n        } else {\n          this.$message.error(result.msg);\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      });\n    },\n    handleEdit(row) {\n      this.form = row;\n      this.dialogFormVisible = true;\n    },\n    handleDelete(id) {\n      this.axios.delete(\"/menu/delete\", {\n        params: {\n          id: id\n        }\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.$message.success(\"删除成功\");\n          this.load();\n        } else {\n          this.$message.error(result.msg);\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","description","tableData","multipleSelection","dialogFormVisible","form","created","load","methods","axios","get","then","res","result","code","$message","error","msg","catch","response","search","params","decription","reset","handleAdd","handleAddC","pid","save","post","success","handleSelectionChange","val","console","log","delBatch","ids","map","v","id","handleEdit","row","handleDelete","delete"],"sources":["src/views/systemview/MenuView.vue"],"sourcesContent":["<template>\n  <div>\n    <div style=\"margin: 10px 0\">\n      <el-input style=\"width: 200px; margin-left: 5px\" suffix-icon=\"el-icon-search\" placeholder=\"请输入名称\" v-model=\"name\"></el-input>\n      <el-input style=\"width: 200px; margin-left: 5px\" suffix-icon=\"el-icon-document\" placeholder=\"请输入描述\" v-model=\"description\"></el-input>\n      <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"search\">搜索</el-button>\n      <el-button style=\"margin-left: 5px\" type=\"warning\" @click=\"reset\">重置</el-button>\n      <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"handleAdd\">新增<i class=\"el-icon-circle-plus-outline\" style=\"margin-left: 5px\"></i></el-button>\n      <el-popconfirm\n          confirm-button-text='好的'\n          cancel-button-text='不用了'\n          icon=\"el-icon-info\"\n          icon-color=\"red\"\n          title=\"确定批量删除吗？\"\n          @confirm=\"delBatch\">\n        <el-button style=\"margin-left: 5px\" type=\"danger\" slot=\"reference\">批量删除<i class=\"el-icon-remove-outline\" style=\"margin-left: 5px\"></i></el-button>\n      </el-popconfirm>\n    </div>\n    <el-table\n        :data=\"tableData\"\n        height=\"60vh\"\n        style=\"width: 100%; border-radius: 10px\"\n        stripe row-key=\"id\" default-expand-all\n        @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" width=\"50\"/>\n      <el-table-column prop=\"menuName\" label=\"菜单名\" width=\"110\"/>\n      <el-table-column prop=\"path\" label=\"路径\" width=\"100\"/>\n      <el-table-column prop=\"component\" label=\"组件\" width=\"140\"/>\n      <el-table-column label=\"图标\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <i :class=\"scope.row.icon\" style=\"font-size: 20px\"/>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"description\" label=\"描述\" align=\"center\"/>\n      <el-table-column prop=\"option\" label=\"操作\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" @click=\"handleAddC(scope.row.id)\" v-if=\"!scope.row.pid\">新增子菜单<i class=\"el-icon-plus\" style=\"margin-left: 5px\"></i></el-button>\n          <el-button type=\"success\" @click=\"handleEdit(scope.row)\">编辑</el-button>\n          <el-popconfirm\n              confirm-button-text='好的'\n              cancel-button-text='不用了'\n              icon=\"el-icon-info\"\n              icon-color=\"red\"\n              title=\"确定删除吗？\"\n              @confirm=\"handleDelete(scope.row.id)\">\n            <el-button type=\"danger\" slot=\"reference\" style=\"margin-left: 5px\">删除</el-button>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"菜单信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\">\n      <el-form :model=\"form\" label-width=\"100px\" size=\"small\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"form.menuName\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"路径\">\n          <el-input v-model=\"form.path\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"图标\">\n          <el-select clearable v-model=\"form.icon\" placeholder=\"请选择\" style=\"width: 100%\">\n            <el-option v-for=\"item in options\" :key=\"item.name\" :label=\"item.name\" :value=\"item.value\">\n              <i :class=\"item.value\"/>{{item.name}}\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"描述\">\n          <el-input v-model=\"form.description\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"MenuView\",\n  data() {\n    return {\n      name: \"\",\n      description: \"\",\n      tableData: [],\n      multipleSelection: [],\n      dialogFormVisible: false,\n      form: {}\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods: {\n    load() {\n      this.axios.get(\"/menu/all\").then(res => {\n        let result = res.data\n        if (result.code === 'C200') {\n          this.tableData = result.data\n        } else {\n          this.$message.error(result.msg)\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      })\n    },\n    search() {\n      this.axios.get(\"/menu/find\", {\n        params: {\n          name: this.name,\n          decription: this.description\n        }\n      }).then(res => {\n        let result = res.data\n        if (result.code === 'C200') {\n          this.tableData = result.data\n        } else {\n          this.$message.error(result.msg)\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      })\n    },\n    reset() {\n      this.name = \"\"\n      this.description = \"\"\n      this.load()\n    },\n    handleAdd() {\n      this.dialogFormVisible = true\n      this.form = {}\n    },\n    handleAddC(pid) {\n      this.dialogFormVisible = true\n      this.form = {}\n      this.form.pid = pid\n    },\n    save() {\n      this.axios.post(\"/menu/saveOrUpdate\", this.form).then(res => {\n        let result = res.data\n        if (result.code === 'C200') {\n          this.$message.success(\"添加成功\")\n          this.dialogFormVisible = false\n          this.load()\n        } else {\n          this.$message.error(result.msg)\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      })\n    },\n    handleSelectionChange(val) {\n      console.log(val)\n      this.multipleSelection = val\n    },\n    delBatch() {\n      let ids = this.multipleSelection.map(v => v.id)\n      this.axios.post(\"/menu/batchDelete\", ids).then(res => {\n        let result = res.data\n        if (result.code === 'C200') {\n          this.$message.success(\"批量删除成功\")\n          this.load()\n        } else {\n          this.$message.error(result.msg)\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      })\n    },\n    handleEdit(row) {\n      this.form = row\n      this.dialogFormVisible = true\n    },\n    handleDelete(id) {\n      this.axios.delete(\"/menu/delete\", {\n        params: {\n          id: id\n        }\n      }).then(res => {\n        let result = res.data\n        if (result.code === 'C200') {\n          this.$message.success(\"删除成功\")\n          this.load()\n        } else {\n          this.$message.error(result.msg)\n        }\n      }).catch(error => {\n        this.$message.error(error.response.data.msg);\n      })\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>"],"mappings":"AA8EA;EACAA,IAAA;EACAC,KAAA;IACA;MACAD,IAAA;MACAE,WAAA;MACAC,SAAA;MACAC,iBAAA;MACAC,iBAAA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAA;MACA,KAAAE,KAAA,CAAAC,GAAA,cAAAC,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAZ,IAAA;QACA,IAAAa,MAAA,CAAAC,IAAA;UACA,KAAAZ,SAAA,GAAAW,MAAA,CAAAb,IAAA;QACA;UACA,KAAAe,QAAA,CAAAC,KAAA,CAAAH,MAAA,CAAAI,GAAA;QACA;MACA,GAAAC,KAAA,CAAAF,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA,CAAAA,KAAA,CAAAG,QAAA,CAAAnB,IAAA,CAAAiB,GAAA;MACA;IACA;IACAG,OAAA;MACA,KAAAX,KAAA,CAAAC,GAAA;QACAW,MAAA;UACAtB,IAAA,OAAAA,IAAA;UACAuB,UAAA,OAAArB;QACA;MACA,GAAAU,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAZ,IAAA;QACA,IAAAa,MAAA,CAAAC,IAAA;UACA,KAAAZ,SAAA,GAAAW,MAAA,CAAAb,IAAA;QACA;UACA,KAAAe,QAAA,CAAAC,KAAA,CAAAH,MAAA,CAAAI,GAAA;QACA;MACA,GAAAC,KAAA,CAAAF,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA,CAAAA,KAAA,CAAAG,QAAA,CAAAnB,IAAA,CAAAiB,GAAA;MACA;IACA;IACAM,MAAA;MACA,KAAAxB,IAAA;MACA,KAAAE,WAAA;MACA,KAAAM,IAAA;IACA;IACAiB,UAAA;MACA,KAAApB,iBAAA;MACA,KAAAC,IAAA;IACA;IACAoB,WAAAC,GAAA;MACA,KAAAtB,iBAAA;MACA,KAAAC,IAAA;MACA,KAAAA,IAAA,CAAAqB,GAAA,GAAAA,GAAA;IACA;IACAC,KAAA;MACA,KAAAlB,KAAA,CAAAmB,IAAA,4BAAAvB,IAAA,EAAAM,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAZ,IAAA;QACA,IAAAa,MAAA,CAAAC,IAAA;UACA,KAAAC,QAAA,CAAAc,OAAA;UACA,KAAAzB,iBAAA;UACA,KAAAG,IAAA;QACA;UACA,KAAAQ,QAAA,CAAAC,KAAA,CAAAH,MAAA,CAAAI,GAAA;QACA;MACA,GAAAC,KAAA,CAAAF,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA,CAAAA,KAAA,CAAAG,QAAA,CAAAnB,IAAA,CAAAiB,GAAA;MACA;IACA;IACAa,sBAAAC,GAAA;MACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;MACA,KAAA5B,iBAAA,GAAA4B,GAAA;IACA;IACAG,SAAA;MACA,IAAAC,GAAA,QAAAhC,iBAAA,CAAAiC,GAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAC,EAAA;MACA,KAAA7B,KAAA,CAAAmB,IAAA,sBAAAO,GAAA,EAAAxB,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAZ,IAAA;QACA,IAAAa,MAAA,CAAAC,IAAA;UACA,KAAAC,QAAA,CAAAc,OAAA;UACA,KAAAtB,IAAA;QACA;UACA,KAAAQ,QAAA,CAAAC,KAAA,CAAAH,MAAA,CAAAI,GAAA;QACA;MACA,GAAAC,KAAA,CAAAF,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA,CAAAA,KAAA,CAAAG,QAAA,CAAAnB,IAAA,CAAAiB,GAAA;MACA;IACA;IACAsB,WAAAC,GAAA;MACA,KAAAnC,IAAA,GAAAmC,GAAA;MACA,KAAApC,iBAAA;IACA;IACAqC,aAAAH,EAAA;MACA,KAAA7B,KAAA,CAAAiC,MAAA;QACArB,MAAA;UACAiB,EAAA,EAAAA;QACA;MACA,GAAA3B,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAZ,IAAA;QACA,IAAAa,MAAA,CAAAC,IAAA;UACA,KAAAC,QAAA,CAAAc,OAAA;UACA,KAAAtB,IAAA;QACA;UACA,KAAAQ,QAAA,CAAAC,KAAA,CAAAH,MAAA,CAAAI,GAAA;QACA;MACA,GAAAC,KAAA,CAAAF,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA,CAAAA,KAAA,CAAAG,QAAA,CAAAnB,IAAA,CAAAiB,GAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}