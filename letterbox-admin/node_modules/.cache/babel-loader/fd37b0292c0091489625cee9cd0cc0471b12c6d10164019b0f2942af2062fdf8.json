{"ast":null,"code":"export default {\n  name: \"HeaderBar\",\n  data() {\n    return {\n      form: {},\n      dialogFormVisible: false\n    };\n  },\n  props: {\n    collapseBtnClass: String,\n    collapse: Function,\n    user: Object\n  },\n  methods: {\n    logout() {\n      this.axios.post(\"/logout\").then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.$store.commit(\"logout\");\n          this.$message.success(result.msg);\n        }\n      });\n    },\n    openPasswordTable() {\n      this.dialogFormVisible = true;\n    },\n    changePassword() {\n      if (this.form.newPassword != this.form.confirmPassword) {\n        this.$message.error(\"密码不一致！\");\n        return false;\n      }\n      if (this.form.newPassword === this.form.password) {\n        this.$message.error(\"与原密码相同\");\n        return false;\n      }\n      this.axios.post(\"/user/changePassword\", {\n        username: this.user.username,\n        password: this.form.password,\n        newPassword: this.form.newPassword\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.$message.success(\"修改成功\");\n          this.logout();\n        } else if (result.code === 'C400') {\n          this.$message.error(result.msg);\n        } else {\n          this.$message.error(\"服务异常，请稍后重试\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","form","dialogFormVisible","props","collapseBtnClass","String","collapse","Function","user","Object","methods","logout","axios","post","then","res","result","code","$store","commit","$message","success","msg","openPasswordTable","changePassword","newPassword","confirmPassword","error","password","username"],"sources":["src/components/HeaderBar.vue"],"sourcesContent":["<template>\n  <div style=\"line-height: 60px; display: flex\">\n    <div style=\"flex: 1; text-align: left\">\n      <span :class=\"collapseBtnClass\" style=\"cursor: pointer; font-size: 18px\" @click=\"collapse\"></span>\n      <el-breadcrumb separator=\"/\" style=\"display: inline-block; margin-left: 10px\">\n        <el-breadcrumb-item :to=\"{ path: '/' }\">管理页面</el-breadcrumb-item>\n        <el-breadcrumb-item>{{this.$route.name}}</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n    <div style=\"text-align: right; height: 60px; width: 150px; cursor: pointer\">\n      <el-dropdown>\n        <div style=\"display: inline-block;\">\n          <span class=\"block\">\n            <el-avatar style=\"margin-top: 10px\" shape=\"square\" :size=\"40\" :src=\"user.avatar\"></el-avatar>\n          </span>\n        </div>\n        <el-dropdown-menu slot=\"dropdown\" style=\"width: 100px; text-align: center\">\n          <el-dropdown-item style=\"font-size: 14px; padding: 5px 0\">\n            <router-link to=\"/sys/admin\" style=\"text-decoration: none;\">个人信息</router-link>\n          </el-dropdown-item>\n          <el-dropdown-item style=\"font-size: 14px; padding: 5px 0\">\n            <el-button type=\"text\" @click=\"openPasswordTable\">修改密码</el-button>\n          </el-dropdown-item>\n          <el-dropdown-item style=\"font-size: 14px; padding: 5px 0\">\n            <span style=\"text-decoration: none;\" @click=\"logout\">退出</span>\n          </el-dropdown-item>\n      </el-dropdown-menu>\n      <el-dialog width=\"30%\" :visible.sync=\"dialogFormVisible\">\n            <div slot=\"title\" style=\"text-align: center; font-weight: bold; height: 60px; line-height: 60px\">修改密码</div>\n            <el-form :model=\"form\" style=\"text-align: left;\" label-width=\"100px\" size=\"small\">\n              <el-form-item label=\"原密码\">\n                <el-input v-model=\"form.password\" show-password autocomplete=\"off\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"新密码\" >\n                <el-input v-model=\"form.newPassword\" show-password autocomplete=\"off\"></el-input>\n              </el-form-item>\n              <el-form-item label=\"确认密码\">\n                <el-input v-model=\"form.confirmPassword\" show-password autocomplete=\"off\"></el-input>\n              </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\" style=\"height: 70px; line-height: 70px\">\n              <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"changePassword\">确 定</el-button>\n            </div>\n          </el-dialog>\n      </el-dropdown>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"HeaderBar\",\n  data() {\n    return {\n      form: {},\n      dialogFormVisible: false\n    }\n  },\n  props: {\n    collapseBtnClass: String,\n    collapse: Function,\n    user: Object\n  },\n  methods: {\n    logout() {\n      this.axios.post(\"/logout\").then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.$store.commit(\"logout\");\n          this.$message.success(result.msg);\n        }\n      })\n    },\n    openPasswordTable() {\n      this.dialogFormVisible = true;\n    },\n    changePassword() {\n      if (this.form.newPassword != this.form.confirmPassword) {\n        this.$message.error(\"密码不一致！\");\n        return false;\n      }\n      if (this.form.newPassword === this.form.password) {\n        this.$message.error(\"与原密码相同\");\n        return false;\n      }\n      this.axios.post(\"/user/changePassword\", {\n        username: this.user.username,\n        password: this.form.password,\n        newPassword: this.form.newPassword\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.$message.success(\"修改成功\");\n          this.logout();\n        } else if (result.code === 'C400') {\n          this.$message.error(result.msg);\n        } else {\n          this.$message.error(\"服务异常，请稍后重试\");\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n"],"mappings":"AAmDA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,iBAAA;IACA;EACA;EACAC,KAAA;IACAC,gBAAA,EAAAC,MAAA;IACAC,QAAA,EAAAC,QAAA;IACAC,IAAA,EAAAC;EACA;EACAC,OAAA;IACAC,OAAA;MACA,KAAAC,KAAA,CAAAC,IAAA,YAAAC,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAf,IAAA;QACA,IAAAgB,MAAA,CAAAC,IAAA;UACA,KAAAC,MAAA,CAAAC,MAAA;UACA,KAAAC,QAAA,CAAAC,OAAA,CAAAL,MAAA,CAAAM,GAAA;QACA;MACA;IACA;IACAC,kBAAA;MACA,KAAArB,iBAAA;IACA;IACAsB,eAAA;MACA,SAAAvB,IAAA,CAAAwB,WAAA,SAAAxB,IAAA,CAAAyB,eAAA;QACA,KAAAN,QAAA,CAAAO,KAAA;QACA;MACA;MACA,SAAA1B,IAAA,CAAAwB,WAAA,UAAAxB,IAAA,CAAA2B,QAAA;QACA,KAAAR,QAAA,CAAAO,KAAA;QACA;MACA;MACA,KAAAf,KAAA,CAAAC,IAAA;QACAgB,QAAA,OAAArB,IAAA,CAAAqB,QAAA;QACAD,QAAA,OAAA3B,IAAA,CAAA2B,QAAA;QACAH,WAAA,OAAAxB,IAAA,CAAAwB;MACA,GAAAX,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAf,IAAA;QACA,IAAAgB,MAAA,CAAAC,IAAA;UACA,KAAAG,QAAA,CAAAC,OAAA;UACA,KAAAV,MAAA;QACA,WAAAK,MAAA,CAAAC,IAAA;UACA,KAAAG,QAAA,CAAAO,KAAA,CAAAX,MAAA,CAAAM,GAAA;QACA;UACA,KAAAF,QAAA,CAAAO,KAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}