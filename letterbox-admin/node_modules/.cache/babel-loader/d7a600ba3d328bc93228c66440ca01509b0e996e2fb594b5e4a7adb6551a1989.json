{"ast":null,"code":"export default {\n  name: \"TextView\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      textDialogVisible: false,\n      letter: {}\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.axios.get(\"/letter/page\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.tableData = result.data.page;\n          this.total = result.data.total;\n        } else {\n          this.$message.error(result.msg);\n        }\n      });\n    },\n    handleView(data) {\n      this.textDialogVisible = true;\n      this.letter = data;\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    }\n  }\n};","map":{"version":3,"names":["name","data","tableData","pageNum","pageSize","total","textDialogVisible","letter","created","load","methods","axios","get","params","then","res","result","code","page","$message","error","msg","handleView","handleSizeChange","handleCurrentChange"],"sources":["src/views/fileview/TextView.vue"],"sourcesContent":["<template>\n  <div>\n    <div style=\"margin: 10px 0\">\n      <el-input style=\"width: 200px; margin-left: 5px\" suffix-icon=\"el-icon-search\" placeholder=\"请输入图片名\" v-model=\"filename\"></el-input>\n      <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"search\">搜索</el-button>\n      <el-button style=\"margin-left: 5px\" type=\"warning\" @click=\"reset\">重置</el-button>\n    </div>\n    <el-table\n    :data=\"tableData\"\n    :default-sort = \"{prop: 'date', order: 'descending'}\"\n    height=\"60vh\"\n    style=\"width: 100%; border-radius: 10px\">\n    <el-table-column\n      prop=\"date\"\n      label=\"日期\"\n      fixed=\"left\"\n      sortable\n      width=\"150\"\n      align=\"center\">\n    </el-table-column>\n    <el-table-column label=\"配送信息\" align=\"center\">\n      <el-table-column\n        prop=\"username\"\n        label=\"作者\"\n        width=\"120\"\n        align=\"center\">\n      </el-table-column>\n      <el-table-column label=\"地址配置\" align=\"center\">\n        <el-table-column\n          prop=\"fromAddress\"\n          label=\"源地址\"\n          width=\"300\">\n        </el-table-column>\n        <el-table-column\n          prop=\"toAddress\"\n          label=\"目的地址\"\n          width=\"300\">\n        </el-table-column>\n        <el-table-column\n          prop=\"postalCode\"\n          label=\"邮编\"\n          width=\"120\" align=\"center\">\n        </el-table-column>\n      </el-table-column>\n    </el-table-column>\n    <el-table-column label=\"配置内容\" align=\"center\">\n      <el-table-column prop=\"paperId\" label=\"信纸\" align=\"center\"></el-table-column>\n      <el-table-column prop=\"coverId\" label=\"信封\" align=\"center\"></el-table-column>\n      <el-table-column prop=\"inkId\" label=\"字体\" align=\"center\"></el-table-column>\n      <el-table-column label=\"内容\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" @click=\"handleView(scope.row)\">预览</el-button>\n        </template>\n      </el-table-column>\n    </el-table-column>\n    <el-table-column label=\"状态\" fixed=\"right\" align=\"center\">\n      <template slot-scope=\"scope\">\n        <div v-if=\"scope.row.status=2\">\n          <el-tag type=\"info\">未发出</el-tag>\n        </div>\n        <div v-else-if=\"scope.row.status=3\">\n          <el-tag type=\"info\">已发出</el-tag>\n        </div>\n        <div v-else-if=\"scope.row.status=4\">\n          <el-tag type=\"info\">已退回</el-tag>\n        </div>\n        <div v-else>\n          <el-tag type=\"info\">已收到</el-tag>\n        </div>\n      </template>\n    </el-table-column>\n  </el-table>\n  <div style=\"padding: 10px 0\">\n      <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"pageNum\"\n          :page-sizes=\"[2, 5, 10, 15]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n      </el-pagination>\n    </div>\n    <el-dialog\n        title=\"预览\"\n        :visible.sync=\"textDialogVisible\"\n        width=\"40%\"\n        center>\n      <el-descriptions title=\"信件\">\n        <el-descriptions-item label=\"用户名\">{{ letter.username }}</el-descriptions-item>\n        <el-descriptions-item label=\"源地址\">{{ letter.fromAddress }}</el-descriptions-item>\n        <el-descriptions-item label=\"目的地址\">{{ letter.toAddress }}</el-descriptions-item>\n        <el-descriptions-item label=\"邮编\">{{ letter.postalCode }}</el-descriptions-item>\n        <el-descriptions-item label=\"联系方式\">{{ letter.callPhone }}</el-descriptions-item>\n      </el-descriptions>\n      <el-divider></el-divider>\n      <span>{{ letter.context }}</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"textDialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"textDialogVisible = false\">确 定</el-button>\n      </span>\n    </el-dialog>  \n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"TextView\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      textDialogVisible: false,\n      letter: {}\n    }\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.axios.get(\"/letter/page\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        let result = res.data;\n        if (result.code === 'C200') {\n          this.tableData = result.data.page;\n          this.total = result.data.total;\n        } else {\n          this.$message.error(result.msg);\n        }\n      })\n    },\n    handleView(data) {\n      this.textDialogVisible = true;\n      this.letter = data;\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"AA0GA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAC,iBAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAA;MACA,KAAAE,KAAA,CAAAC,GAAA;QACAC,MAAA;UACAV,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA;QACA;MACA,GAAAU,IAAA,CAAAC,GAAA;QACA,IAAAC,MAAA,GAAAD,GAAA,CAAAd,IAAA;QACA,IAAAe,MAAA,CAAAC,IAAA;UACA,KAAAf,SAAA,GAAAc,MAAA,CAAAf,IAAA,CAAAiB,IAAA;UACA,KAAAb,KAAA,GAAAW,MAAA,CAAAf,IAAA,CAAAI,KAAA;QACA;UACA,KAAAc,QAAA,CAAAC,KAAA,CAAAJ,MAAA,CAAAK,GAAA;QACA;MACA;IACA;IACAC,WAAArB,IAAA;MACA,KAAAK,iBAAA;MACA,KAAAC,MAAA,GAAAN,IAAA;IACA;IACAsB,iBAAAnB,QAAA;MACA,KAAAA,QAAA,GAAAA,QAAA;MACA,KAAAK,IAAA;IACA;IACAe,oBAAArB,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;MACA,KAAAM,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}